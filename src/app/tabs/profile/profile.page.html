<ion-header [translucent]="true" class="custom-header">
  <ion-toolbar>
    <ion-title>Profile</ion-title>
    <ion-buttons slot="end">
      <ion-button>
        <ion-icon name="settings-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Profile Header -->
  <div class="profile-header">
    <div class="profile-avatar-section">
      <ion-avatar class="profile-avatar">
        <img [src]="userProfile.avatar" alt="Profile" />
      </ion-avatar>
      <h2>{{ userProfile.name }}</h2>
      <p class="user-email">{{ userProfile.email }}</p>
    </div>

    <!-- Follow Stats Section -->
    <div class="follow-stats-section">
      <div class="follow-stat-item">
        <h3>{{ userProfile.stats.followers }}</h3>
        <p>Followers</p>
      </div>
      <div class="follow-stat-item">
        <h3>{{ userProfile.stats.following }}</h3>
        <p>Following</p>
      </div>
      <div class="follow-stat-item">
        <h3>{{ userProfile.stats.favorites }}</h3>
        <p>Favorites</p>
      </div>
    </div>
  </div>

  <!-- User Statistics Cards -->
  <div class="stats-cards-section">
    <ion-card class="stat-card">
      <ion-card-content>
        <div class="stat-card-header">
          <ion-icon name="film-outline" class="stat-icon"></ion-icon>
          <div class="stat-info">
            <h3>{{ totalMoviesWatched }}</h3>
            <p>Movies Watched</p>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <ion-card class="stat-card">
      <ion-card-content>
        <div class="stat-card-header">
          <ion-icon name="heart-outline" class="stat-icon favorite-icon"></ion-icon>
          <div class="stat-info">
            <h3>{{ favoriteGenre }}</h3>
            <p>Favorite Genre</p>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Genre Distribution -->
  <div class="genre-section" *ngIf="genreStats.length > 0">
    <h3 class="section-title">Genre Preferences</h3>
    <ion-card class="genre-card">
      <ion-card-content>
        <div class="genre-item" *ngFor="let genre of genreStats.slice(0, 5)">
          <div class="genre-info">
            <span class="genre-name">{{ genre.name }}</span>
            <span class="genre-count">{{ genre.count }} movies</span>
          </div>
          <div class="genre-bar-container">
            <div class="genre-bar" [style.width.%]="(genre.count / genreStats[0].count) * 100">
            </div>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Logout Section -->
  <div class="menu-section">
    <!-- Logout Button -->
    <ion-button expand="block" shape="round" class="logout-button" (click)="logout()">
      <ion-icon name="log-out-outline" slot="start"></ion-icon>
      Logout
    </ion-button>
  </div>
</ion-content>
